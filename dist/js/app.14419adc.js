(function(){"use strict";var e={4669:function(e,t,n){var a=n(9242),o=(n(7658),n(541),n(3396)),l=n(7139),s=n(4870),i=n(4161);const c={id:"main"},u={id:"center"},r={id:"bottom"};var d=(0,o.aZ)({__name:"dialogCom",props:{title:null,show:{type:Boolean}},setup(e){const t=e;return(e,n)=>((0,o.wg)(),(0,o.iD)("div",{id:"dialog",class:(0,l.C_)({show:t.show})},[(0,o._)("div",c,[(0,o._)("p",null,(0,l.zw)(t.title),1),(0,o._)("div",u,[(0,o.WI)(e.$slots,"center")]),(0,o._)("div",r,[(0,o.WI)(e.$slots,"bottom")])])],2))}}),v=n(89);const p=(0,v.Z)(d,[["__scopeId","data-v-7549cf0a"]]);var m=p;let h=0;function f(e){const t=document.querySelector("body"),n=document.createElement("div");n.id="messageBox",n.className="messageBox-"+ ++h,n.innerHTML=`<div class="${e.type}">${e.content}</div>`,t?.appendChild(n),setTimeout((()=>{h--,n.remove()}),3e3)}var g=f,y=n(5068),w=n(5792),_=n(8134),k=n.n(_),b=n(3099),S=n.n(b);const C=(0,s.iH)("");function T(e){window.localStorage.setItem("n0ts-chatgpt-theme",e),C.value=e}function O(){const e=window.localStorage.getItem("n0ts-chatgpt-theme");e?C.value=e:T("light"),document.documentElement.setAttribute("theme",e||"light")}function H(){C.value=window.localStorage.getItem("n0ts-chatgpt-theme"),C.value="light"===C.value?"dark":"light",T(C.value),O()}var I={switchTheme:H,load:O,themeCache:C},x={key:"",data:{model:"gpt-3.5-turbo"},system:""};function D(){return window.localStorage.setItem("n0ts-chatgpt-config",JSON.stringify(x)),x}function U(){const e=JSON.parse(window.localStorage.getItem("n0ts-chatgpt-config")??"{}");return e.key?(x.key=e.key,x.data=e.data,x.system=e.system,x):D()}var E={save:D,read:U,config:x};const M=e=>((0,o.dD)("data-v-1836b31e"),e=e(),(0,o.Cn)(),e),j={id:"chatgpt"},N={id:"chats"},Y=["onClick"],q=["onClick"],A={id:"bottom"},P={key:0,class:"money"},$={id:"main"},L={key:0,id:"messages"},B={class:"img"},z={key:0,class:"system"},K={key:1,class:"user"},G={key:2,class:"ai"},J=["innerHTML"],Z=M((()=>(0,o._)("div",{id:"stretch"},null,-1))),V={key:1,id:"home"},W=M((()=>(0,o._)("div",null,[(0,o._)("p",null,"ğŸ¤ª ChatGPT åŸºäº gpt-3.5-turbo å¼€å‘"),(0,o._)("div",{class:"content"},[(0,o._)("p",null," æœ¬é¡¹ç›®çº¯å‰ç«¯è‡ªå¨±è‡ªä¹ï¼Œæ•°æ®ä»…åœ¨ localStorage ä¸­è¯»å– "),(0,o._)("p",null,"å›½å†…éšæ„è®¿é—®ï¼Œè§£å†³ api æ— æ³•è®¿é—®é—®é¢˜"),(0,o._)("p",null,"çå†™ä¸€é€šï¼ŒåŠŸèƒ½ç®€å•æ‰€ä»¥ä»£ç è¾ƒè‡­"),(0,o._)("p",null,[(0,o.Uk)(" å¼€æºåœ°å€ï¼ˆæ±‚ starï¼‰ï¼š"),(0,o._)("a",{href:"https://gitee.com/n0ts/chat-gpt",target:"_blank"},"Gitee")]),(0,o._)("p",null,[(0,o.Uk)(" æŠ€æœ¯äº¤æµï¼š"),(0,o._)("a",{href:"https://jq.qq.com/?_wv=1027&k=Mh7ah6Dd"},"åšæœå°æ ˆ")])])],-1))),F=[W],R={id:"input"},Q=M((()=>(0,o._)("p",null,"è¯·åœ¨ä¸‹æ–¹è¾“å…¥ä½ çš„ key",-1))),X=M((()=>(0,o._)("p",null,[(0,o.Uk)(" ç”³è¯·åœ°å€ï¼š"),(0,o._)("a",{href:"https://platform.openai.com/account/api-keys",target:"_blank"},"ç‚¹æˆ‘")],-1))),ee=["onKeydown"],te=M((()=>(0,o._)("p",{class:"tips"}," key ä¼šä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨(localStorage)ä¸­ï¼Œåªä¾›æœ¬åœ°ä½¿ç”¨ ",-1))),ne={class:"panel"},ae=M((()=>(0,o._)("p",null,"keyï¼š",-1))),oe=M((()=>(0,o._)("p",{class:"tips"},"OpenAI ç”³è¯·çš„ Key",-1))),le=M((()=>(0,o._)("p",null,"è¡Œä¸ºè®¾å®šï¼š",-1))),se={class:"tips"},ie=M((()=>(0,o._)("span",null,"ç»™ OpenAI è®¾å®šä¸€ä¸ªè¡Œä¸ºï¼Œæ¯”å¦‚ï¼š",-1))),ce=M((()=>(0,o._)("br",null,null,-1))),ue=M((()=>(0,o._)("span",null,"â€œä½ æ˜¯ä¸€ç›´çŒ«ï¼Œæ¯å¥è¯åé¢åŠ ä¸ª å–µ~â€",-1))),re=M((()=>(0,o._)("br",null,null,-1))),de=M((()=>(0,o._)("span",null,"åˆæˆ–è€…",-1))),ve=M((()=>(0,o._)("br",null,null,-1))),pe=["innerHTML"];var me=(0,o.aZ)({__name:"App",setup(e){const{config:t,read:n,save:c}=E;n();const u=(0,s.iH)(""==t.key);let r=null,d=null;(0,o.bv)((()=>{d=new(S())(document.querySelector("#main")),r=document.querySelector("#messages"),I.load(),t.key&&Te()}));const v=(0,s.iH)("");function p(){if(""==v.value)return g({type:"warning",content:"key ä¸èƒ½ä¸ºç©º"});t.key=v.value,c(),u.value=!1,g({type:"success",content:"key å­˜å‚¨æˆåŠŸï¼Œå¼€å§‹æé—®å§"}),Te()}const h=(0,s.iH)(!1);async function f(){h.value=!0,_("assistant",""),fetch("https://node.fatshady.cn/chatgpt-stream",{method:"POST",body:JSON.stringify({key:t.key,model:t.data.model,messages:W[me.value].contents,timeout:6e4}),headers:{"Content-Type":"application/json"}}).then((e=>{const t=e.body.getReader(),n=new TextDecoder("utf-8");let a="";t.read().then((async function e(l){if(l.done)return void console.log("Stream complete");const s=n.decode(l.value);return s.includes("data: [DONE]")?(console.log("Stream complete"),h.value=!1,b(),ge(),O(),await(0,o.Y3)(),void d.update()):(s.replaceAll("data: ","").split("\n").filter(Boolean).forEach((e=>{const t=JSON.parse(e);console.log("stream push",t),t.choices[0].delta.content&&(a+=t.choices[0].delta.content,W[me.value].contents[W[me.value].contents.length-1].content=y.TU.parse(a),ge(),O())})),t.read().then(e))}))})).catch((()=>{h.value=!1}))}async function _(e,t,n){W[me.value].contents.push({role:e,content:n||t}),ge(),O(),b(),console.log("ğŸš€ å¯¹è¯ç»“æœï¼š | clients[clientsIndex.value].contents:",W[me.value].contents),await(0,o.Y3)(),d.update()}function b(){window.localStorage.setItem("message-data",JSON.stringify(W))}const C=(0,s.iH)("");function T(){if(""!=C.value&&""!=C.value.trim()&&!h.value){if(-1==me.value&&(W.unshift({name:"",contents:[]}),me.value=0),t.system&&0==W[me.value].contents.length&&_("system",t.system),_("user",C.value),1==W[me.value].contents.length||"system"==W[me.value].contents[0].role&&2==W[me.value].contents.length){const e=C.value;let t=1;W.forEach((n=>{0==n.name.indexOf(e)&&t++})),W[me.value].name=e+(1==t?"":` #${t}`),document.title=e+" | ChatGPT"}C.value="",f()}}async function O(){if(await(0,o.Y3)(),r=document.querySelector("#messages"),r){r.children;r.scrollTo({top:r.scrollHeight})}else O()}let H=!1;function x(e){if(16===e.keyCode&&(H=!0),!H&&13===e.keyCode)return T(),e.preventDefault(),!1}function D(e){16===e.keyCode&&(H=!1)}const U=(0,s.iH)(24);(0,o.YP)((()=>C.value),(()=>{const e=C.value.split("\n").length;U.value=24*e}));const M=window.localStorage.getItem("message-data"),W=(0,s.qj)(M?JSON.parse(M):[]),me=(0,s.iH)(-1);function he(){b();let e=1;W.forEach((t=>{0==t.name.indexOf("æ–°ä¼šè¯")&&e++})),W.unshift({name:"æ–°ä¼šè¯"+(1==e?"":` #${e}`),contents:[]}),C.value="",me.value=0}function fe(e){document.title="ğŸ¤ªChatGPT",W.splice(e,1),me.value=-1,b()}async function ge(){await(0,o.Y3)();const e=[];document.querySelectorAll("#messages pre code").forEach((t=>{const n=t;if(!n.className.includes("hljs")){const t=document.createElement("div");t.className="copyBtn",t.innerHTML="å¤åˆ¶",t.setAttribute("code",n.innerText),t.addEventListener("click",(e=>{_e(e)})),n.parentElement?.appendChild(t),w.Z.highlightElement(n),e.push(n)}})),ye(e)}function ye(e){for(let t=0;t<e.length;t++){const n=e[t].innerHTML.replace(/\n/g,"</li><li>");e[t].innerHTML=`<ol><li>${n}</li></ol>`.replace("<li></li></ol>","</ol>")}}(0,o.YP)((()=>me.value),(async()=>{W[me.value]&&(document.title=W[me.value].name+" | ğŸ¤ªChatGPT",ge(),O(),await(0,o.Y3)(),d.update())}));const we=(0,s.iH)(!1);function _e(e){const t=e.target.getAttribute("code");t&&(k().copy(t),g({type:"success",content:"å¤åˆ¶æˆåŠŸ"}))}function ke(){window.localStorage.removeItem("message-data"),window.localStorage.removeItem("n0ts-chatgpt-theme"),window.localStorage.removeItem("n0ts-chatgpt-config"),window.location.reload()}const be=(0,s.iH)(!1);function Se(){be.value=!be.value,c(),g({type:"success",content:"è®¾ç½®å·²ä¿å­˜"})}const Ce=(0,s.iH)(null);async function Te(){const{data:e}=await(0,i.Z)({method:"post",url:"https://node.fatshady.cn/cors",data:{method:"GET",url:"https://api.openai.com/dashboard/billing/credit_grants",headers:{authorization:`Bearer ${t.key}`}}});Ce.value=e.data}function Oe(e,t){return Number(e.toFixed(t))}return(e,n)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",j,[(0,o._)("div",{id:"sidebar",class:(0,l.C_)({sideBarShow:we.value})},[(0,o._)("div",{class:"btns"},[(0,o._)("div",{class:"btn",onClick:he},"ğŸ¤“ æ–°å»ºä¼šè¯")]),(0,o._)("div",N,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(W,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t,onClick:e=>me.value=t,class:(0,l.C_)({active:me.value==t})},[(0,o._)("p",null,(0,l.zw)(e.name),1),(0,o._)("span",{onClick:(0,a.iM)((e=>fe(t)),["stop"])},"ğŸ—‘ åˆ é™¤",8,q)],10,Y)))),128))]),(0,o._)("div",A,[(0,o._)("div",{class:"btn",onClick:n[0]||(n[0]=(...e)=>(0,s.SU)(I).switchTheme&&(0,s.SU)(I).switchTheme(...e))},(0,l.zw)("light"==(0,s.SU)(I).themeCache.value?"ğŸŒƒ æš—è‰²æ¨¡å¼":"ğŸŒ‡ äº®è‰²æ¨¡å¼"),1),(0,o._)("div",{class:"btn",onClick:n[1]||(n[1]=e=>be.value=!0)},"ğŸ‘ æ‰“å¼€é…ç½®"),(0,o._)("div",{class:"btn",onClick:ke},"ğŸ‘Š é‡ç½®é…ç½®"),Ce.value?((0,o.wg)(),(0,o.iD)("div",P," ä½™é¢ï¼š"+(0,l.zw)(Oe(Ce.value.total_available,2))+" $ï¼Œå·²ç”¨ï¼š"+(0,l.zw)(Oe(Ce.value.total_used,2))+" $ ",1)):(0,o.kq)("",!0)]),(0,o._)("div",{id:"showBtn",onClick:n[2]||(n[2]=e=>we.value=!we.value)},(0,l.zw)(we.value?"ğŸ‘ˆ":"ğŸ‘‰"),1)],2),(0,o._)("div",$,[W[me.value]?((0,o.wg)(),(0,o.iD)("div",L,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(W[me.value].contents,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:t},[(0,o._)("div",B,["system"==e.role?((0,o.wg)(),(0,o.iD)("div",z," SY ")):"user"==e.role?((0,o.wg)(),(0,o.iD)("div",K," Me ")):((0,o.wg)(),(0,o.iD)("div",G,"AI"))]),(0,o._)("div",{class:(0,l.C_)(["content",{end:!h.value}]),innerHTML:e.content},null,10,J)])))),128)),Z])):((0,o.wg)(),(0,o.iD)("div",V,F)),(0,o._)("div",R,[(0,o.wy)((0,o._)("textarea",{"onUpdate:modelValue":n[3]||(n[3]=e=>C.value=e),onKeydown:x,onKeyup:D,style:(0,l.j5)({height:U.value+"px"})},null,36),[[a.nr,C.value]])])])]),(0,o.Wm)(m,{title:"è¾“å…¥ key",show:u.value},{center:(0,o.w5)((()=>[Q,X,(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":n[4]||(n[4]=e=>v.value=e),onKeydown:(0,a.D2)(p,["enter"])},null,40,ee),[[a.nr,v.value]]),te])),bottom:(0,o.w5)((()=>[(0,o._)("button",{class:"success",onClick:p},"æäº¤")])),_:1},8,["show"]),(0,o.Wm)(m,{title:"è®¾ç½®",show:be.value},{center:(0,o.w5)((()=>[(0,o._)("div",ne,[(0,o._)("div",null,[ae,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":n[5]||(n[5]=e=>(0,s.SU)(t).key=e)},null,512),[[a.nr,(0,s.SU)(t).key]])]),oe,(0,o._)("div",null,[le,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":n[6]||(n[6]=e=>(0,s.SU)(t).system=e)},null,512),[[a.nr,(0,s.SU)(t).system]])]),(0,o._)("p",se,[ie,ce,ue,re,de,ve,(0,o._)("span",{innerHTML:"â€œå½“ä½ è¦å‘é€å›¾ç‰‡æ—¶ï¼Œè¯·ä½¿ç”¨ markdownï¼Œä¸è¦ç”¨ä»£ç å—ï¼Œå¹¶ä¸”ä» Unsplash API ä¸­â€œhttps://source.unsplash.com/960x640/?<å…³é”®è¯>â€ è·å–â€"},null,8,pe)])])])),bottom:(0,o.w5)((()=>[(0,o._)("button",{class:"success",onClick:Se},"ä¿å­˜")])),_:1},8,["show"])],64))}});const he=(0,v.Z)(me,[["__scopeId","data-v-1836b31e"]]);var fe=he;(0,a.ri)(fe).mount("#app")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,l){if(!a){var s=1/0;for(r=0;r<e.length;r++){a=e[r][0],o=e[r][1],l=e[r][2];for(var i=!0,c=0;c<a.length;c++)(!1&l||s>=l)&&Object.keys(n.O).every((function(e){return n.O[e](a[c])}))?a.splice(c--,1):(i=!1,l<s&&(s=l));if(i){e.splice(r--,1);var u=o();void 0!==u&&(t=u)}}return t}l=l||0;for(var r=e.length;r>0&&e[r-1][2]>l;r--)e[r]=e[r-1];e[r]=[a,o,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,l,s=a[0],i=a[1],c=a[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(c)var r=c(n)}for(t&&t(a);u<s.length;u++)l=s[u],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(r)},a=self["webpackChunkchatgpt"]=self["webpackChunkchatgpt"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(4669)}));a=n.O(a)})();
//# sourceMappingURL=app.14419adc.js.map